#!/bin/bash
set -e

# 1. Executa apenas os testes essenciais (rÃ¡pidos)
echo "ğŸš€ Executando verificaÃ§Ãµes prÃ©-commit..."

# 2. Linters (extremamente rÃ¡pidos)
docker compose run --rm web bundle exec rubocop -a --fail-level warning
docker compose run --rm web yarn lint:fix

# 3. Testes unitÃ¡rios (apenas os mais relevantes)
docker compose run --rm web bin/rails test:units

# 4. VerificaÃ§Ã£o de seguranÃ§a bÃ¡sica
docker compose run --rm web bundle audit check --update
docker compose down

echo "âœ… PrÃ©-commit verificado com sucesso!"
